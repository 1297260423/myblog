---
title: "图像增强"
date: 2023-02-22T10:04:04+08:00
tags: []
categories: ["计算机视觉"]
toc:
  enable: true
description: 
draft: true

---

<!--more-->
> https://www.bilibili.com/video/BV1vV411d7ne
# 图像增强的概念

- 图像增强是采用一系列技术取改善图像的视觉效果，或将图像转换成一种个适合于人或机器进行分析和处理的形式。例如采用以系列有选择突出某些感兴趣的信息，同时抑制一些不需要的信息，提高图像的使用价值。

- 图像增强方法从增强的作用域出发，可分为空间域增强和频率域增强两种。

  - 空间域增强是直接对图像的各像素进行处理;

  - 频域增强是对图像进行傅里叶变换后的频谱成分进行处理，然后逆傅里叶变换获得所需的图像



# 图像增强的点运算

## 灰度变换

- 灰度变换壳调整图像的灰度动态范围或图像对比度，是图像增强的重要手段之一。

> 对应256级灰度，纯黑对应数值为0

### 1.线性变换

- 令图像$f(i,j)$的灰度范围为$[a,b]$，
- 线性变换后图像$g(i,j)$的范围为$[a,b]$
- $(f(i,j))$和$g(i,j)$的关系式为

$$ g(i,j)=a\'+\frac{(b'-a')}{(b-a)}(f(i,j)-a) $$

### 2.分段线性变换
- 为了突出感兴趣目标所在的灰度区间，相对一致那些不感兴趣的灰度区间，可以采用分段线性变换。
- 设原图$f(x,y)$在$[0,M_f]$,感兴趣的目标灰度范围在$[a,b]$,欲使灰度乏味拉伸到$[c,d]$，则对应的分段线性变换为：

$ g(x,y) = \begin {cases}
(\frac{c}{a})f(x,y), & 0 \le f(x,y) \lt a \\\
(\frac{d-c}{b-a})[f(x,y)-a]+c, & a \le f(x,y) \lt b \\\
(\frac{M_g-d}{M_f-b})[f(x,y)-b]+d, & b \le f(x,y) \lt M_f \\\
\end {cases} $

### 3.非线性变换
- 对数变换
  - $g(x,y)=a+\frac{\ln{[f(x,y)+1]}}{b*\ln{c}}$
  - 其中，$a,b,c$用于调整曲线位置和形状
  - 适于对图像低灰度区进行较大拉伸而对高灰度区压缩
- 指数变换
  - $g(i,j)=b^{c[f(i,j)-a]}-1$
  - 其中，$a,b,c$用于调整曲线位置和形状
  - 这种变换对图像高灰度区给予了较大的拉伸
## 伽马变换

- 设源图像和变换后图像分别为$r$和$s$,伽马变换为:$s=cr^\gamma$,其中源图像为$double$型，$r\in[0,1]$
- 当$c=1$时，
  - 若$\gamma\lt1$,图像中暗的部分被增强，图像视觉上变亮;
  - 若$\gamma\=1$,$s=r$;
  - 若$\gamma\gt1$,图像中亮的地方变暗，被抑制，图像整体变暗;

# 直方图修整法
- 灰度直方图反映了数字图像中的每一个灰度级与其出现频率间的关系，它能描述该图像的概貌。通过修改直方图的方法增强图像是一种使用而且有效地处理技术。
- 直方图修整方法包括直方图均衡化和直方图规定化两类。

## 1.直方图均衡化

- 将原图经某种变化，得到一幅直方图均匀分布的新图像。
- 怎么做到？
  - 从连续图像过渡到离散图像
- 连续情况下
  - 设归一化了的原图像$r$和修正后的图像$s$有$0\le r,s\le 1$
  - 变换$s=T(r)$，满足
    1. $0 \le r \le 1$内单调递增，且从黑道到次序不变
    2. $0 \le r \le 1$内有$0 \le T(r) \le 1$
    3. 反变换同样满足上述两个条件。
- 由概率分布函数和概率密度的关系: $P_s(s)\frac{d}{ds}[\int_ {-\infty} ^ r p_r(r)dr]=p_r\frac{dr}{ds}=p_r\frac{d}{ds}[T^{-1}(s)]$
- 则有：$ds=p_r(r)dr$
- 两边积分得：$s=T(r)=A=\int _0^r p_rdr$
> 结论：当变换函数为r的积累直方图函数时，能达到直方图均衡化的目的。
> 
> 推广到离散情况：$s_k=T(r_k)=\displaystyle\sum_{j=0}^kp_r(r_j)=\displaystyle\sum_{j=0}^k\frac{n_j}{n}$

## 2.直方图规定化
- 在某些情况下，并不一定需要具有均匀直方图的图像，有时需要具有特定的直方图的图像，以便能够增强图像中某些灰度级。直方图规定化方法就是针对上述思想提出来的。
直方图规定化是使原图像灰度直方图变成规定形状的直方图二对图像作修正的增强方法
- 可见，它是对直方图均衡化处理的一种有效的扩展。直方图均衡化处理是直方图规定化的一个特例
- 对于直方图规定化，下面仍从灰度连续变化的概率密度函数出发进行推导，然后推广出灰度离散的图像直方图规定化算法。
- 假设$p_r(r)$和$p_z(z)$分别表示已归一化的原始图像灰度分布的概率密度函数和希望得到的图像的概率密度函数。
